import { initializeApp } from "firebase/app";
import { getFirestore, collection, getDocs } from "firebase/firestore"; 

const firebaseConfig = {
  apiKey: "AIzaSyDPLwpz4GcsNrmn6HNKLPmQWokZgKT4Cis",
  authDomain: "oata-8c05b.firebaseapp.com",
  projectId: "oata-8c05b",
  storageBucket: "oata-8c05b.firebasestorage.app",
  messagingSenderId: "949261471175",
  appId: "1:949261471175:web:28482b939262d8e93f1de2",
  measurementId: "G-02LMR8FTNX"
};

// Firebase を初期化
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Firestore からデータを取得して表示
async function fetchThreads() {
    const threadsRef = collection(db, "companies", "0001", "threads");
    const snapshot = await getDocs(threadsRef);

    let threads = [];
    snapshot.forEach(doc => {
        threads.push({ id: doc.id, ...doc.data() });
    });

    console.log(threads); // デバッグ用
    displayThreads(threads);
}

// HTML に表示
function displayThreads(threads) {
    const container = document.getElementById("threads-container");
    container.innerHTML = "";

    threads.forEach(thread => {
        const div = document.createElement("div");
        div.innerHTML = `<p><strong>ID:</strong> ${thread.id} <br> 
                         <strong>Departure:</strong> ${thread.departure} <br> 
                         <strong>Price:</strong> ${thread.confirmedPrice}円</p>`;
        container.appendChild(div);
    });
}

// 実行
fetchThreads();
